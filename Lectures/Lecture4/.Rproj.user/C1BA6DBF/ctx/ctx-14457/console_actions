{
    "type": [
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        3,
        2,
        2
    ],
    "data": [
        "\nR version 4.3.2 (2023-10-31 ucrt) -- \"Eye Holes\"\nCopyright (C) 2023 The R Foundation for Statistical Computing\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\n\nR is free software and comes with ABSOLUTELY NO WARRANTY.\nYou are welcome to redistribute it under certain conditions.\nType 'license()' or 'licence()' for distribution details.\n\n  Natural language support but running in an English locale\n\nR is a collaborative project with many contributors.\nType 'contributors()' for more information and\n'citation()' on ho",
        "w to cite R or R packages in publications.\n\nType 'demo()' for some demos, 'help()' for on-line help, or\n'help.start()' for an HTML browser interface to help.\nType 'q()' to quit R.\n\n",
        "> ",
        "library(tidyverse)",
        "── \u001B[1mAttaching core tidyverse packages\u001B[22m ──────────────────────────────────────────────────────────────────────────────────── tidyverse 2.0.0 ──\n\u001B[32m✔\u001B[39m \u001B[34mdplyr    \u001B[39m 1.1.4     \u001B[32m✔\u001B[39m \u001B[34mreadr    \u001B[39m 2.1.5\n\u001B[32m✔\u001B[39m \u001B[34mforcats  \u001B[39m 1.0.0     \u001B[32m✔\u001B[39m \u001B[34mstringr  \u001B[39m 1.5.1\n\u001B[32m✔\u001B[39m \u001B[34",
        "mggplot2  \u001B[39m 3.4.4     \u001B[32m✔\u001B[39m \u001B[34mtibble   \u001B[39m 3.2.1\n\u001B[32m✔\u001B[39m \u001B[34mlubridate\u001B[39m 1.9.3     \u001B[32m✔\u001B[39m \u001B[34mtidyr    \u001B[39m 1.3.0\n\u001B[32m✔\u001B[39m \u001B[34mpurrr    \u001B[39m 1.0.2     \n── \u001B[1mConflicts\u001B[22m ─────────────────────────────────────────────────────────────────────────────────────────────────",
        "───── tidyverse_conflicts() ──\n\u001B[31m✖\u001B[39m \u001B[34mdplyr\u001B[39m::\u001B[32mfilter()\u001B[39m masks \u001B[34mstats\u001B[39m::filter()\n\u001B[31m✖\u001B[39m \u001B[34mdplyr\u001B[39m::\u001B[32mlag()\u001B[39m    masks \u001B[34mstats\u001B[39m::lag()\n\u001B[36mℹ\u001B[39m Use the \u001B]8;;http://conflicted.r-lib.org/\u0007conflicted package\u001B]8;;\u0007 to force all conflicts to become errors\n",
        "> ",
        "library(weights)",
        "Loading required package: Hmisc\n\nAttaching package: ‘Hmisc’\n\nThe following objects are masked from ‘package:dplyr’:\n\n    src, summarize\n\nThe following objects are masked from ‘package:base’:\n\n    format.pval, units\n\n",
        "> ",
        "library(lmtest)",
        "Loading required package: zoo\n\nAttaching package: ‘zoo’\n\nThe following objects are masked from ‘package:base’:\n\n    as.Date, as.Date.numeric\n\n",
        "> ",
        "library(sandwich)",
        "> ",
        "library(knitr)",
        "> ",
        " load(\"arrests.clean.RData\")",
        "> ",
        "> ",
        "#2b.",
        "> ",
        "  st_arrests <- arrests.clean %>% ",
        "+ ",
        "   group_by(st_id, loc2) %>% ",
        "+ ",
        "    summarise(arrests_all = n() ) %>% ",
        "+ ",
        "    arrange(desc(arrests_all))",
        "\u001B[38;5;250m`summarise()` has grouped output by 'st_id'. You can override using the `.groups` argument.\u001B[39m\n",
        "> ",
        "> ",
        "  #inspect - DO NOT INCLUDE IN RMD SUBMISSION",
        "> ",
        "  str(st_arrests)  #why is this so long?",
        "gropd_df [157 × 3] (S3: grouped_df/tbl_df/tbl/data.frame)\n $ st_id      : Factor w/ 157 levels \"1\",\"2\",\"3\",\"4\",..: 66 99 150 70 114 131 54 147 106 123 ...\n $ loc2       : Factor w/ 157 levels \"15 st prospect park f g line\",..: 66 100 149 148 110 129 54 146 104 122 ...\n $ arrests_all: int [1:157] 223 198 143 142 141 141 133 102 90 86 ...\n - attr(*, \"groups\")= tibble [157 × 2] (S3: tbl_df/tbl/data.frame)\n  ..$ st_id: Factor w/ 157 levels \"1\",\"2\",\"3\",\"4\",..: 1 2 3 4 5 6 7 8 9 10 ...\n  ..$ .rows: list<int> [1",
        ":157] \n  .. ..$ : int 129\n  .. ..$ : int 91\n  .. ..$ : int 130\n  .. ..$ : int 131\n  .. ..$ : int 82\n  .. ..$ : int 132\n  .. ..$ : int 99\n  .. ..$ : int 92\n  .. ..$ : int 61\n  .. ..$ : int 100\n  .. ..$ : int 93\n  .. ..$ : int 133\n  .. ..$ : int 53\n  .. ..$ : int 134\n  .. ..$ : int 76\n  .. ..$ : int 135\n  .. ..$ : int 106\n  .. ..$ : int 101\n  .. ..$ : int 136\n  .. ..$ : int 107\n  .. ..$ : int 137\n  .. ..$ : int 108\n  .. ..$ : int 64\n  .. ..$ : int 69\n  .. ..$ : int 59\n  .. ..$ : int 36\n  .. ..$ : int 29\n  .. ",
        "..$ : int 70\n  .. ..$ : int 112\n  .. ..$ : int 77\n  .. ..$ : int 94\n  .. ..$ : int 113\n  .. ..$ : int 138\n  .. ..$ : int 139\n  .. ..$ : int 140\n  .. ..$ : int 103\n  .. ..$ : int 141\n  .. ..$ : int 65\n  .. ..$ : int 120\n  .. ..$ : int 142\n  .. ..$ : int 95\n  .. ..$ : int 104\n  .. ..$ : int 143\n  .. ..$ : int 30\n  .. ..$ : int 44\n  .. ..$ : int 96\n  .. ..$ : int 71\n  .. ..$ : int 109\n  .. ..$ : int 114\n  .. ..$ : int 49\n  .. ..$ : int 144\n  .. ..$ : int 28\n  .. ..$ : int 115\n  .. ..$ : int 7\n  .. ..$ : int 12",
        "1\n  .. ..$ : int 145\n  .. ..$ : int 72\n  .. ..$ : int 73\n  .. ..$ : int 62\n  .. ..$ : int 116\n  .. ..$ : int 146\n  .. ..$ : int 88\n  .. ..$ : int 85\n  .. ..$ : int 18\n  .. ..$ : int 122\n  .. ..$ : int 1\n  .. ..$ : int 117\n  .. ..$ : int 21\n  .. ..$ : int 42\n  .. ..$ : int 4\n  .. ..$ : int 147\n  .. ..$ : int 63\n  .. ..$ : int 75\n  .. ..$ : int 148\n  .. ..$ : int 68\n  .. ..$ : int 56\n  .. ..$ : int 25\n  .. ..$ : int 26\n  .. ..$ : int 50\n  .. ..$ : int 27\n  .. ..$ : int 78\n  .. ..$ : int 149\n  .. ..$ : int 150",
        "\n  .. ..$ : int 60\n  .. ..$ : int 47\n  .. ..$ : int 123\n  .. ..$ : int 24\n  .. ..$ : int 22\n  .. ..$ : int 151\n  .. ..$ : int 57\n  .. ..$ : int 32\n  .. ..$ : int 152\n  .. ..$ : int 31\n  .. ..$ : int 118\n  .. ..$ : int 124\n  .. ..$ : int 74\n  .. ..$ : int 11\n  .. ..$ : int 14\n  .. ..$ : int 2\n  .. .. [list output truncated]\n  .. ..@ ptype: int(0) \n  ..- attr(*, \".drop\")= logi TRUE\n",
        "> ",
        "  str(st_arrests, give.attr = FALSE)",
        "gropd_df [157 × 3] (S3: grouped_df/tbl_df/tbl/data.frame)\n $ st_id      : Factor w/ 157 levels \"1\",\"2\",\"3\",\"4\",..: 66 99 150 70 114 131 54 147 106 123 ...\n $ loc2       : Factor w/ 157 levels \"15 st prospect park f g line\",..: 66 100 149 148 110 129 54 146 104 122 ...\n $ arrests_all: int [1:157] 223 198 143 142 141 141 133 102 90 86 ...\n",
        "> ",
        "  #can also consider ungrouping the st_arrests dataframe ",
        "> ",
        "  ",
        "> ",
        "  #2c.",
        "> ",
        "  ggplot(st_arrests, aes(x= arrests_all)) + geom_histogram()",
        "\u001B[38;5;250m`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\u001B[39m\n",
        "> ",
        "  ",
        "> ",
        "  #remember ggplot is in the tidyverse, so we can also start by passing the data into a pipe",
        "> ",
        "  st_arrests %>% ggplot(aes(x= arrests_all)) + geom_histogram()",
        "\u001B[38;5;250m`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\u001B[39m\n",
        "> ",
        "> ",
        "    ",
        "> ",
        "## -----------------------------------------------------------------------------",
        "> ",
        "## 3. joining ridership and neighborhood demographics to arrest data",
        "> ",
        "##",
        "> ",
        "##  a. read in other station-level csv files (w/strings as factors) and inspect",
        "> ",
        "##      - don't include inspection code in your rmd submission",
        "> ",
        "##  ",
        "> ",
        "##  b. join both data frames to st_arrests & inspect results (store new df as st_joined),",
        "> ",
        "##      - inspect results of join and describe any issues",
        "> ",
        "##      - drop unnecessary columns from the ridership data",
        "> ",
        "##      - group st_joined by st_id and mta_name",
        "> ",
        "##      - inspect but don't include inspection code in your rmd submission",
        "> ",
        "##        - confirm you have 157 station-level observations",
        "> ",
        "##",
        "> ",
        "##  c. print top 10 stations by arrest counts",
        "> ",
        "##      - only display st_id, mta_name, arrests_all, shareblack, povrt_all_2016",
        "> ",
        "## -----------------------------------------------------------------------------",
        "> ",
        "> ",
        "#3a. ",
        "> ",
        "  st_poverty <- read.csv(\"station_povdataclean_2016.csv\", ",
        "+ ",
        "                         stringsAsFactors = TRUE)",
        "> ",
        "  ",
        "> ",
        "  #background on poverty data (from 2016 American Community Survey): ",
        "> ",
        "  #  Source: https://usa.ipums.org/usa/acs.shtml",
        "> ",
        "  #  each observation represents a \"subway station area\", defined as follows:",
        "> ",
        "  #   - all census tracts w/geometric center within .5km of a station (see map)",
        "> ",
        "  #  st_id is the unique identifier for each subway station area",
        "> ",
        "  #  povrt_all_2016: % of adults in subway station area living below federal poverty level",
        "> ",
        "  #  shareblack: share of adults in subway station area who identify as Black",
        "> ",
        "  #  nblack: dummy variable = 1 if shareblack >= 50%, 0 otherwise",
        "> ",
        "  ",
        "> ",
        "  ",
        "> ",
        "  st_ridership <- read.csv(\"Subway Ridership by Station - BK.csv\", ",
        "+ ",
        "                           stringsAsFactors = TRUE)",
        "> ",
        "  #background on MTA ridership data:",
        "> ",
        "  #  Source: http://web.mta.info/nyct/facts/ridership/ridership_sub_annual.htm",
        "> ",
        "  #  each observation is a subway station (area) w/a unique identifier (st_id)",
        "> ",
        "  #  includes annual ridership (# of MetroCard 'swipes') at each station for 2011-16",
        "> ",
        "> ",
        "  #make sure to inspect these new df's before we join them in 3b!",
        "> ",
        "  ",
        "> ",
        "> ",
        "#3b.",
        "> ",
        "  ",
        "> ",
        "  #a vector of columns we don't need to keep, will use in 3b",
        "> ",
        "  drop_vars <- c(\"swipes2011\", \"swipes2012\", \"swipes2013\", \"swipes2014\", \"swipes2015\")",
        "> ",
        "  ",
        "> ",
        "  #example: join st_arrests to st_poverty",
        "> ",
        "  st_joinedtemp <- inner_join(st_arrests, st_poverty, by = c(\"st_id\" = \"st_id\")) ",
        "\u001B[1m\u001B[33mError\u001B[39m in `inner_join()`:\u001B[22m\n\u001B[38;5;250m\u001B[33m!\u001B[38;5;250m Can't join `x$st_id` with `y$st_id` due to incompatible types.\n\u001B[36mℹ\u001B[38;5;250m `x$st_id` is a <factor<7ee29>>.\n\u001B[36mℹ\u001B[38;5;250m `y$st_id` is a <integer>.\u001B[39m\n\u001B[90mRun `\u001B]8;;rstudio:run:rlang::last_trace()\u0007rlang::last_trace()\u001B]8;;\u0007` to see where the error occurred.\u001B[39m\n",
        "> ",
        " st_joined %>% ",
        "+ ",
        "    arrange(desc(arrests_all)) %>% ",
        "+ ",
        "    select(st_id, mta_name, arrests_all, shareblack, povrt_all_2016) %>% ",
        "+ ",
        "    head(n = 10) ",
        "Error: object 'st_joined' not found\n",
        "> ",
        " ggplot(stations, aes(x = povrt_all_2016, y = arrperswipe, color = nblack)) +",
        "+ ",
        "    geom_point() +",
        "+ ",
        "    #Modify legend title and text",
        "+ ",
        "    scale_color_discrete(name = \"Predominantly Black Station\",",
        "+ ",
        "                         labels=c(\"No\", \"Yes\"),",
        "+ ",
        "                         #Reverse Label Order",
        "+ ",
        "                         guide = guide_legend(reverse=TRUE)) +",
        "+ ",
        "    #Modify legend aesthetics (optional)",
        "+ ",
        "    theme(legend.position = \"bottom\", ",
        "+ ",
        "          legend.background = element_rect(color = \"black\", fill = \"grey90\", size = .2, linetype = \"solid\"), ",
        "+ ",
        "          legend.direction = \"horizontal\",",
        "+ ",
        "          legend.text = element_text(size = 8), ",
        "+ ",
        "          legend.title = element_text(size = 8) )",
        "Error: object 'stations' not found\n",
        "> ",
        " drop_vars <- c(\"swipes2011\", \"swipes2012\", \"swipes2013\", \"swipes2014\", \"swipes2015\")",
        "> ",
        "  ",
        "> ",
        "  #example: join st_arrests to st_poverty",
        "> ",
        "  st_joinedtemp <- inner_join(st_arrests, st_poverty, by = c(\"st_id\" = \"st_id\")) ",
        "\u001B[1m\u001B[33mError\u001B[39m in `inner_join()`:\u001B[22m\n\u001B[38;5;250m\u001B[33m!\u001B[38;5;250m Can't join `x$st_id` with `y$st_id` due to incompatible types.\n\u001B[36mℹ\u001B[38;5;250m `x$st_id` is a <factor<7ee29>>.\n\u001B[36mℹ\u001B[38;5;250m `y$st_id` is a <integer>.\u001B[39m\n\u001B[90mRun `\u001B]8;;rstudio:run:rlang::last_trace()\u0007rlang::last_trace()\u001B]8;;\u0007` to see where the error occurred.\u001B[39m\n",
        "> ",
        "install.packages(\"weights\")",
        "Error in install.packages : Updating loaded packages\n",
        "> ",
        "install.packages(\"lmtest\")",
        "Error in install.packages : Updating loaded packages\n",
        "> ",
        "install.packages(\"sandwich\")",
        "Error in install.packages : Updating loaded packages\n",
        "> ",
        "install.packages(\"knitr\")",
        "Error in install.packages : Updating loaded packages\n\nRestarting R session...\n\n",
        "> ",
        "install.packages(\"knitr\")",
        "WARNING: Rtools is required to build R packages but is not currently installed. Please download and install the appropriate version of Rtools before proceeding:\n\nhttps://cran.rstudio.com/bin/windows/Rtools/\nInstalling package into ‘C:/Users/philc/AppData/Local/R/win-library/4.3’\n(as ‘lib’ is unspecified)\ntrying URL 'https://cran.rstudio.com/bin/windows/contrib/4.3/knitr_1.45.zip'\nContent type 'application/zip' length 1520892 bytes (1.5 MB)\ndownloaded 1.5 MB\n\n",
        "package ‘knitr’ successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n\tC:\\Users\\philc\\AppData\\Local\\Temp\\RtmpQr9ody\\downloaded_packages\n\nRestarting R session...\n\n",
        "\nRestarting R session...\n\n"
    ]
}